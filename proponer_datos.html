<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Proponer Datos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
  </head>
  <body>
    <div class="container mt-5">
      <h1 class="h3 mb-4">Proponer datos</h1>
      <p class="text-muted">
        Ayuda a mejorar la informaci√≥n actualizada comparendo tus observaciones
        sobre inundaciones.
      </p>
      <p class="text-danger">* Significa obligatorio</p>

      <div class="row">
        <div class="col-md-3">
          <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action active">
              <span class="me-2">üìã</span> Pautas
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <span class="me-2">‚ùì</span> Preguntas frecuentes
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <span class="me-2">üìû</span> Contacto
            </a>
          </div>
        </div>
        <div class="col-md-9">
          <form>
            <div class="mb-3">
              <label for="reportType" class="form-label"
                >Tipo de reporte *</label
              >
              <select class="form-select" id="reportType" required>
                <option value="nueva">Nueva inundaci√≥n</option>
                <option value="actualizacion">Actualizaci√≥n</option>
                <option value="conexion">Posible inundaci√≥n</option>
              </select>
              <small class="text-muted"
                >Por favor, selecciona o cambia la opci√≥n si aplica.</small
              >
            </div>

            <div class="mb-3">
              <label for="location" class="form-label">Ubicaci√≥n *</label>
              <input
                type="text"
                class="form-control"
                id="location"
                required
                placeholder="Ej.: Calle Principal, No. 123"
              />
            </div>

            <div class="mb-3">
              <label for="municipality" class="form-label">Municipio</label>
              <input
                type="text"
                class="form-control"
                id="municipality"
                placeholder="Ej.: Ciudad Ejemplo"
              />
            </div>

            <div class="mb-3">
              <label class="form-label"
                >Clic en el mapa para seleccionar ubicaci√≥n</label
              >
              <div
                id="map"
                class="border p-3"
                style="height: 300px"
                tabindex="0"
                aria-label="Mapa interactivo para seleccionar ubicaci√≥n"
              ></div>
            </div>

            <div class="mb-3">
              <label for="coordinates" class="form-label"
                >Coordenadas seleccionadas</label
              >
              <input
                type="text"
                class="form-control"
                id="coordinates"
                readonly
                placeholder="Latitud, Longitud (seleccionadas en el mapa)"
              />
            </div>

            <div class="mb-3">
              <label for="floodDetails" class="form-label"
                >Detalles de la inundaci√≥n *</label
              >
              <textarea
                class="form-control"
                id="floodDetails"
                rows="3"
                required
                placeholder="Ej.: Fecha: DD/MM/AAAA, Hora: HH:MM, Nivel del agua: XXcm"
              ></textarea>
            </div>

            <div class="mb-3">
              <label for="attachments" class="form-label"
                >Adjuntar fotos o videos (opcional)</label
              >
              <input
                type="file"
                class="form-control"
                id="attachments"
                accept="image/*,video/*"
              />
            </div>

            <div class="mb-3">
              <label for="contactInfo" class="form-label"
                >Informaci√≥n de contacto (opcional)</label
              >
              <input
                type="text"
                class="form-control"
                id="contactInfo"
                placeholder="Ej.: Nombre o correo@example.com"
              />
            </div>

            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="terms"
                required
              />
              <label class="form-check-label" for="terms"
                >Acepto los t√©rminos y condiciones</label
              >
            </div>

            <button type="submit" class="btn btn-primary">Enviar</button>
            <button type="button" class="btn btn-secondary ms-2">
              Cancelar
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Leaflet JS -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script>
      // Initialize Leaflet map centered on La Plata, Argentina
      const map = L.map("map").setView([-34.921, -57.954], 12); // La Plata coordinates, zoom level 12

      // Add OpenStreetMap tiles
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

      // Variable to store the marker
      let marker = null;

      // Add click event to place a marker
      map.on("click", function (e) {
        // Remove previous marker if it exists
        if (marker) {
          map.removeLayer(marker);
        }
        // Add new marker at clicked location
        marker = L.marker(e.latlng).addTo(map);
        // Update coordinates input with lat/lng
        document.getElementById("coordinates").value = `${e.latlng.lat.toFixed(
          6,
        )}, ${e.latlng.lng.toFixed(6)}`;
      });
    </script>
  </body>
</html>
